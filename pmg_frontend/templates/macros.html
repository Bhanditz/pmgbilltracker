{% macro render_event(event) -%}
    <div class="row">
        <div class="col-md-12 event">
            <div class="revision-container pull-right text-right">
                <p class="text-muted event-date"><small>{{ event.date }}</small></p>
                {% if event.versions -%}
                    {{ render_bill_versions(event.versions) }}
                {%- endif %}
            </div>

            <div class="icon-placeholder pull-left"></div>
            <p class="text-muted"><span class="stage-title">Stage: {{ event.stage.name }}</span></p>

            {{ render_agent(event.agent) }}

            {% if event.notes %}<p>{{ event.notes }}</p>{% endif %}

            {% if event.content %}
                {{ render_content(event.content) }}
            {%- endif %}
        </div>
    </div>
{%- endmacro %}

{% macro render_agent(agent) -%}
    <p>
        {% if agent.type in ["minister", "president", "mp"] -%}
            <i class="fa fa-user"></i>
        {% elif agent.type == "house" -%}
            <i class="fa fa-gavel"></i>
        {% else -%}
            <i class="fa fa-group"></i>
        {%- endif %}
        {% if agent.name -%}
            {{ agent.name }}
        {% else -%}
            {{ agent.type }}
        {%- endif %}
    </p>
{%- endmacro %}

{% macro render_content(content_dict) -%}
    {% for type, items in content_dict.iteritems() %}
        {{ render_content_item(type, items) }}
    {% endfor %}
{%- endmacro %}

{% macro render_content_item(type, items) -%}
    {% for item in items %}
        <p class="content-item">
            <a href="{{ item.url }}">
                <i class="fa fa-file-o fa-lg"></i> {{ item.title }}
            </a>
        </p>
    {% endfor %}
{%- endmacro %}

{% macro render_bill_versions(version_list) -%}
    {% for version in version_list %}
        {{ render_bill_version(version) }}
    {% endfor %}
{%- endmacro %}

{% macro render_bill_version(version) -%}
    <a class="btn btn-primary btn-lg version" href="/uploads/{{ version.url }}" role="button">
        <i class="fa fa-file-text"></i> Bill version {{ version.title }}
    </a><br>
{%- endmacro %}